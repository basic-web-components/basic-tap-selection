<!--
Aspect which maps the tap gesture to item selection.

@element basic-tap-selection
-->

<link rel="../basic-aspect/basic-aspect.html">

<script>
// TODO: Allow this aspect to be abstract, so it doesn't need to be instantiated
// as a component.

Polymer({

  behaviors: [Basic.Aspect],

  contribute: {

    // Default implementation. This will typically be handled by other aspects
    // in the collective.
    set selectedIndex(index) {},

  },

  is: 'basic-tap-selection',

  ready: function() {
    this.addEventListener('click', function(event) {
      this._selectElement(event.target);
      // event.stopPropagation();
      // return false;
    }.bind(this));
  },

  // TODO: Handle the case where a list item has subelements. Walk up the DOM
  // hierarchy until we find an item in the list, or come back to this element,
  // in which case the element that was tapped isn't an item (and should be
  // ignored).
  _selectElement: function(element) {
    var index = this.collective.indexOfItem && this.collective.indexOfItem(element);
    if (index >= 0) {
      this.collective.selectedIndex = index;
    }
  }

});
</script>
